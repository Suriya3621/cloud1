{"ast":null,"code":"import { useCallback as h, useRef as m } from \"react\";\nimport { FocusableMode as M, isFocusableElement as b } from '../utils/focus-management.js';\nimport { isMobile as y } from '../utils/platform.js';\nimport { useDocumentEvent as c } from './use-document-event.js';\nimport { useIsTopLayer as L } from './use-is-top-layer.js';\nimport { useLatestValue as g } from './use-latest-value.js';\nimport { useWindowEvent as H } from './use-window-event.js';\nconst d = 30;\nfunction F(E, p, C) {\n  let u = L(E, \"outside-click\"),\n    f = g(C),\n    s = h(function (e, o) {\n      if (e.defaultPrevented) return;\n      let r = o(e);\n      if (r === null || !r.getRootNode().contains(r) || !r.isConnected) return;\n      let T = function i(n) {\n        return typeof n == \"function\" ? i(n()) : Array.isArray(n) || n instanceof Set ? n : [n];\n      }(p);\n      for (let i of T) {\n        if (i === null) continue;\n        let n = i instanceof HTMLElement ? i : i.current;\n        if (n != null && n.contains(r) || e.composed && e.composedPath().includes(n)) return;\n      }\n      return !b(r, M.Loose) && r.tabIndex !== -1 && e.preventDefault(), f.current(e, r);\n    }, [f]),\n    l = m(null);\n  c(u, \"pointerdown\", t => {\n    var e, o;\n    l.current = ((o = (e = t.composedPath) == null ? void 0 : e.call(t)) == null ? void 0 : o[0]) || t.target;\n  }, !0), c(u, \"mousedown\", t => {\n    var e, o;\n    l.current = ((o = (e = t.composedPath) == null ? void 0 : e.call(t)) == null ? void 0 : o[0]) || t.target;\n  }, !0), c(u, \"click\", t => {\n    y() || l.current && (s(t, () => l.current), l.current = null);\n  }, !0);\n  let a = m({\n    x: 0,\n    y: 0\n  });\n  c(u, \"touchstart\", t => {\n    a.current.x = t.touches[0].clientX, a.current.y = t.touches[0].clientY;\n  }, !0), c(u, \"touchend\", t => {\n    let e = {\n      x: t.changedTouches[0].clientX,\n      y: t.changedTouches[0].clientY\n    };\n    if (!(Math.abs(e.x - a.current.x) >= d || Math.abs(e.y - a.current.y) >= d)) return s(t, () => t.target instanceof HTMLElement ? t.target : null);\n  }, !0), H(u, \"blur\", t => s(t, () => window.document.activeElement instanceof HTMLIFrameElement ? window.document.activeElement : null), !0);\n}\nexport { F as useOutsideClick };","map":null,"metadata":{},"sourceType":"module"}